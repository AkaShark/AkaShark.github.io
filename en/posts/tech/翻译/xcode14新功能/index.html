<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Xcode14新功能 | SharkerBlog</title>
<meta name="keywords" content="Xcode">
<meta name="description" content="What’s New in Xcode 14 What’s New in Xcode 14 Single Size App Icon 在WWDC22, Apple发布了最新的Xcode14，Xcode14中带来了大量的功能和性能">
<meta name="author" content="Sharker">
<link rel="canonical" href="https://akashark.github.io/en/posts/tech/%E7%BF%BB%E8%AF%91/xcode14%E6%96%B0%E5%8A%9F%E8%83%BD/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2ba854927add582a9b5ae79380c487946e5a9a9c1ba43bbe713af2508e07c061.css" integrity="sha256-K6hUknrdWCqbWueTgMSHlG5ampwbpDu&#43;cTryUI4HwGE=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://media.wjbbf.cn/Blog/blog_label.webp">
<link rel="icon" type="image/png" sizes="16x16" href="http://media.wjbbf.cn/Blog/blog_label.webp">
<link rel="icon" type="image/png" sizes="32x32" href="http://media.wjbbf.cn/Blog/blog_label.webp">
<link rel="apple-touch-icon" href="http://media.wjbbf.cn/Blog/blog_label.webp">
<link rel="mask-icon" href="http://media.wjbbf.cn/Blog/blog_label.webp">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Xcode14新功能" />
<meta property="og:description" content="What’s New in Xcode 14 What’s New in Xcode 14 Single Size App Icon 在WWDC22, Apple发布了最新的Xcode14，Xcode14中带来了大量的功能和性能" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://akashark.github.io/en/posts/tech/%E7%BF%BB%E8%AF%91/xcode14%E6%96%B0%E5%8A%9F%E8%83%BD/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-28T21:20:22&#43;08:00" />
<meta property="article:modified_time" content="2022-09-28T21:20:22&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Xcode14新功能"/>
<meta name="twitter:description" content="What’s New in Xcode 14 What’s New in Xcode 14 Single Size App Icon 在WWDC22, Apple发布了最新的Xcode14，Xcode14中带来了大量的功能和性能"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "文章",
      "item": "https://akashark.github.io/en/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "技术",
      "item": "https://akashark.github.io/en/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Xcode14新功能",
      "item": "https://akashark.github.io/en/posts/tech/%E7%BF%BB%E8%AF%91/xcode14%E6%96%B0%E5%8A%9F%E8%83%BD/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Xcode14新功能",
  "name": "Xcode14新功能",
  "description": "What’s New in Xcode 14 What’s New in Xcode 14 Single Size App Icon 在WWDC22, Apple发布了最新的Xcode14，Xcode14中带来了大量的功能和性能",
  "keywords": [
    "Xcode"
  ],
  "articleBody": "What’s New in Xcode 14 What’s New in Xcode 14\nSingle Size App Icon 在WWDC22, Apple发布了最新的Xcode14，Xcode14中带来了大量的功能和性能的提高，包括了在源码编辑器和其他方面上很多比较Cool的东西，我将和你一起分享下你要知道的。\n让我们来一起过下这些主题\nCode Structure When Scrolling 单尺寸App icon对于开发者是一个非常好的功能，你再也不需要App Icon生成工具，你能使用单一的一个1024x1024px的App Icon 资源。 不但如此，这将减少你App的尺寸，你可以尝试下使用1024x1024px的App Icon资源，然后导入到Xcode的Assets中从右边的工具条上选择单尺寸，一旦你导出IPA，你将看出来不同 下面的图是一个app归档后的结果，他展示了选择App icon 单图片和多图片的不同 Code Structure When Scrolling 我第一次看到这个功能很是吃惊，我想起来了成组的table View的样式，我确信这个是一个有价值的功能，为我们在编辑器滑动的时候展示我们在那个方法。 你当然可以禁止或者开启这个功能在Setting中如下展示 同样的对于标记导航也有修改，你能通过标记导航看到你在代码前写的标记标签。 Memberwise Initializer Completion 完成成员变量的初始化，在之前版本的Xcode，你需要去右击成员变量初始化 在Xcode 14 提供了高效的方式, 创建成员变量初始化，你只需要写下init，然后你将看到最接近的成员变量初始化的方法 还有更多代码补全的提高，这些补全也更加精确 Optiuonal Unwrapping 我看到的一大进步是你不需要通过 if let 设置来创建不可变变量来检查可选变量。 Xcode Build TimeLine 在之前版本的 Xcode 中，我们将构建日志视为一个列表，就像您在左侧看到的以下列表一样。我们还知道正在构建哪个步骤以及需要多少时间。现在，使用 Xcode 14，我们可以将这些日志视为时间线。 Highlighted Other Features and Improvements in the Release Notes 还有很多高光的其他能力和提高在release文档中被提到\nSimulator now supports remote notifications in iOS 16 when running in macOS 13 on Mac computers with Apple silicon or T2 processors. Xcode 14 can now compile targets in parallel with their Swift target dependencies. You can now enable sandboxing for shell script build phases using the ENABLE_USER_SCRIPT_SANDBOXING build setting. Xcode now provides RECOMMENDED_MACOSX_DEPLOYMENT_TARGET, RECOMMENDED_IPHONEOS_DEPLOYMENT_TARGET, RECOMMENDED_TVOS_DEPLOYMENT_TARGET, RECOMMENDED_WATCHOS_DEPLOYMENT_TARGET, and RECOMMENDED_DRIVERKIT_DEPLOYMENT_TARGET build settings that indicate the recommended minimum deployment versions for each supported Xcode platform. Because bitcode is now deprecated, builds for iOS, tvOS, and watchOS no longer include bitcode by default. The Thread Performance Checker shows runtime performance issues in the Issue Navigator and the source editor while debugging an app. Interface Builder now updates scenes asynchronously. Wrapping code with an if statement now automatically reindents the block. ",
  "wordCount" : "882",
  "inLanguage": "en",
  "datePublished": "2022-09-28T21:20:22+08:00",
  "dateModified": "2022-09-28T21:20:22+08:00",
  "author":[{
    "@type": "Person",
    "name": "Sharker"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://akashark.github.io/en/posts/tech/%E7%BF%BB%E8%AF%91/xcode14%E6%96%B0%E5%8A%9F%E8%83%BD/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "SharkerBlog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://media.wjbbf.cn/Blog/blog_label.webp"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-HY6JW1HYRV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HY6JW1HYRV');
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://akashark.github.io/en/" accesskey="h" title="Sharker’s Blog (Alt + H)">
                <img src="http://media.wjbbf.cn/Blog/blog_label.webp" alt="" aria-label="logo"
                    height="35">Sharker’s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://akashark.github.io/en/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://akashark.github.io/en/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://akashark.github.io/en/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://akashark.github.io/en/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://akashark.github.io/en/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://akashark.github.io/en/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://akashark.github.io/en/">Home</a>&nbsp;»&nbsp;<a href="https://akashark.github.io/en/posts/">文章</a>&nbsp;»&nbsp;<a href="https://akashark.github.io/en/posts/tech/">技术</a></div>
    <h1 class="post-title">
      Xcode14新功能
    </h1>
    <div class="post-meta"><span title='2022-09-28 21:20:22 +0800 CST'>2022-09-28</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Sharker

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#whats-new-in-xcode-14" aria-label="What’s New in Xcode 14">What’s New in Xcode 14</a><ul>
                        
                <li>
                    <a href="#single-size-app-icon" aria-label="Single Size App Icon">Single Size App Icon</a></li>
                <li>
                    <a href="#code-structure-when-scrolling" aria-label="Code Structure When Scrolling">Code Structure When Scrolling</a></li>
                <li>
                    <a href="#code-structure-when-scrolling-1" aria-label="Code Structure When Scrolling">Code Structure When Scrolling</a></li>
                <li>
                    <a href="#memberwise-initializer-completion" aria-label="Memberwise Initializer Completion">Memberwise Initializer Completion</a></li>
                <li>
                    <a href="#optiuonal-unwrapping" aria-label="Optiuonal Unwrapping">Optiuonal Unwrapping</a></li>
                <li>
                    <a href="#xcode-build-timeline" aria-label="Xcode Build TimeLine">Xcode Build TimeLine</a></li>
                <li>
                    <a href="#highlighted-other-features-and-improvements-in-the-release-notes" aria-label="Highlighted Other Features and Improvements in the Release Notes">Highlighted Other Features and Improvements in the Release Notes</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="whats-new-in-xcode-14">What’s New in Xcode 14<a hidden class="anchor" aria-hidden="true" href="#whats-new-in-xcode-14">#</a></h1>
<p><a href="https://medium.com/better-programming/whats-new-in-xcode-14-f6b56c33a8b3">What’s New in Xcode 14</a></p>
<h2 id="single-size-app-icon">Single Size App Icon<a hidden class="anchor" aria-hidden="true" href="#single-size-app-icon">#</a></h2>
<p>在WWDC22, Apple发布了最新的Xcode14，Xcode14中带来了大量的功能和性能的提高，包括了在源码编辑器和其他方面上很多比较Cool的东西，我将和你一起分享下你要知道的。</p>
<p>让我们来一起过下这些主题</p>
<h2 id="code-structure-when-scrolling">Code Structure When Scrolling<a hidden class="anchor" aria-hidden="true" href="#code-structure-when-scrolling">#</a></h2>
<p>单尺寸App icon对于开发者是一个非常好的功能，你再也不需要App Icon生成工具，你能使用单一的一个1024x1024px的App Icon 资源。
不但如此，这将减少你App的尺寸，你可以尝试下使用1024x1024px的App Icon资源，然后导入到Xcode的Assets中从右边的工具条上选择单尺寸，一旦你导出IPA，你将看出来不同
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643692829307.jpg" alt=""  />
</p>
<p>下面的图是一个app归档后的结果，他展示了选择App icon 单图片和多图片的不同
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643695060013.jpg" alt=""  />
</p>
<h2 id="code-structure-when-scrolling-1">Code Structure When Scrolling<a hidden class="anchor" aria-hidden="true" href="#code-structure-when-scrolling-1">#</a></h2>
<p>我第一次看到这个功能很是吃惊，我想起来了成组的table View的样式，我确信这个是一个有价值的功能，为我们在编辑器滑动的时候展示我们在那个方法。
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643697173427.jpg" alt=""  />

你当然可以禁止或者开启这个功能在Setting中如下展示
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643697849218.jpg" alt=""  />

同样的对于标记导航也有修改，你能通过标记导航看到你在代码前写的标记标签。
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643698812118.jpg" alt=""  />
</p>
<h2 id="memberwise-initializer-completion">Memberwise Initializer Completion<a hidden class="anchor" aria-hidden="true" href="#memberwise-initializer-completion">#</a></h2>
<p>完成成员变量的初始化，在之前版本的Xcode，你需要去右击成员变量初始化
在Xcode 14 提供了高效的方式, 创建成员变量初始化，你只需要写下init，然后你将看到最接近的成员变量初始化的方法
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643705837020.jpg" alt=""  />

还有更多代码补全的提高，这些补全也更加精确
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643706443539.jpg" alt=""  />
</p>
<h2 id="optiuonal-unwrapping">Optiuonal Unwrapping<a hidden class="anchor" aria-hidden="true" href="#optiuonal-unwrapping">#</a></h2>
<p>我看到的一大进步是你不需要通过 if let 设置来创建不可变变量来检查可选变量。
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643709591771.jpg" alt=""  />
</p>
<h2 id="xcode-build-timeline">Xcode Build TimeLine<a hidden class="anchor" aria-hidden="true" href="#xcode-build-timeline">#</a></h2>
<p>在之前版本的 Xcode 中，我们将构建日志视为一个列表，就像您在左侧看到的以下列表一样。我们还知道正在构建哪个步骤以及需要多少时间。现在，使用 Xcode 14，我们可以将这些日志视为时间线。
<img loading="lazy" src="http://media.wjbbf.cn/mweb/16643709994138.jpg" alt=""  />
</p>
<h2 id="highlighted-other-features-and-improvements-in-the-release-notes">Highlighted Other Features and Improvements in the Release Notes<a hidden class="anchor" aria-hidden="true" href="#highlighted-other-features-and-improvements-in-the-release-notes">#</a></h2>
<p>还有很多高光的其他能力和提高在release文档中被提到</p>
<ul>
<li>Simulator now supports remote notifications in iOS 16 when running in macOS 13 on Mac computers with Apple silicon or T2 processors.</li>
<li>Xcode 14 can now compile targets in parallel with their Swift target dependencies.</li>
<li>You can now enable sandboxing for shell script build phases using the ENABLE_USER_SCRIPT_SANDBOXING build setting.</li>
<li>Xcode now provides RECOMMENDED_MACOSX_DEPLOYMENT_TARGET, RECOMMENDED_IPHONEOS_DEPLOYMENT_TARGET, RECOMMENDED_TVOS_DEPLOYMENT_TARGET, RECOMMENDED_WATCHOS_DEPLOYMENT_TARGET, and RECOMMENDED_DRIVERKIT_DEPLOYMENT_TARGET build settings that indicate the recommended minimum deployment versions for each supported Xcode platform.</li>
<li>Because bitcode is now deprecated, builds for iOS, tvOS, and watchOS no longer include bitcode by default.</li>
<li>The Thread Performance Checker shows runtime performance issues in the Issue Navigator and the source editor while debugging an app.</li>
<li>Interface Builder now updates scenes asynchronously.</li>
<li>Wrapping code with an if statement now automatically reindents the block.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://akashark.github.io/en/tags/xcode/">Xcode</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://akashark.github.io/en/posts/life/%E6%80%9D%E8%80%83/20221001/">
    <span class="title">« Prev</span>
    <br>
    <span>最近的一些感悟 (20221001)</span>
  </a>
  <a class="next" href="https://akashark.github.io/en/posts/tech/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/">
    <span class="title">Next »</span>
    <br>
    <span>工厂模式</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    
        
    
    <span id="sitetime">载入运行时间...</span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script>
    function siteTime() {
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var startYear = 2022;
        var startMonth = 7;
        var startDate = 27;
        var startHour = 15;
        var startMinute = 0;
        var startSecond = 0;
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
            minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
            diffMinutes * minutes) / seconds);
        if (startYear == todayYear) {
            
            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffDays + " 天 " + diffHours +
                " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
        } else {
            
            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffYears + " 年 " + diffDays +
                " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
        }
    }
    setInterval(siteTime, 1000);
</script>
</body>

</html>
